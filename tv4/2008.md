!SLIDE 
2007-8 cms migration

.notes Migration from custom cms to 'off' the shelf solution.
70.000 line java/jsp/html/js/xml 
HOW MANY UNIT TESTS?
deployed Prod every 6-8 weeks
ยง
!SLIDE center
![broken deliveries](broken_record.jpg)
.notes 
one group of developers/business managers per site. no processes.
may not be bad but engineering practices didn't exist either
Long deploy process
Silos everywhere

!SLIDE center

start small

.notes cause you have nothing to begin with

!SLIDE center
* Consistency
* OS
* Build tools (ant/maven)
* Editor (IntellJ)
* Can it compile?

.notes may not seem like much but all these small diffferences added up.

!SLIDE center
![dell optiplex 755](dell-optiplex-755.jpg)
first jenkins machine

.notes same machine as my development environment.

!SLIDE center
java -jar jenkins.war

.notes one terminal, one jar, alittle configuration and your off!

!SLIDE 
![ WELC ]( welc.jpg )

.notes mandatory reading for anybody working with software.

!SLIDE center
* Start continous testing
* ant test

.notes it shoud not be harder than running a single command.
Once you have it done locally getting it running in jenkins trivial

!SLIDE center
![cm code coverage](emma-code-coverage-cm.jpg)
* metrics 

.notes legacy code. ours is probably never going to get better than this.
Euthanasia only hope for this code base.
at most we trust this code base 9%.
depressing but it was &lt;1%

!SLIDE xml smaller
    @@@ xml
    <target name="compile-jsp" depends="compile" 
            description="precompile jsp">
        <java classname="com.caucho.jsp.JspCompiler" 
              fork="true" failonerror="true">
          <classpath refid="resin.classpath" />
          <arg line="-app-dir ${src.web.dispatcher.dir} ${src.web.dispatcher.dir}" />
        </java>
    </target>

http://gist.github.com/320606.js?file=resin-jsp-compile.xml

.notes compiling jsp is just as helpful as compiling java.
catches missed files, bad syntax, doesn't catch jstl-el though.
still worth failing the build.

!SLIDE 
* Deploy till it doesn't hurt (much)
* Deploy every week

.notes Week 1 feature deploy (2 bug fixes)
Week 2 feature deploy (1 bug fix)
Week 3 feature deploy (0 bug fixes that couldn't wait)

!SLIDE center
![dell gx 260](dell-gx-260.jpg)
2nd jenkins

!SLIDE
culture change - it's all about quality

.notes tired of always put out fires started looking. time to start getting rid of points of pain.
in with disqus/solr don't break the internet.

!SLIDE
* Jenkins The ruby era(greenfield)
* No compile
* More tests
* Better Coverage
* Testing generated HTML(still no ajax)

!SLIDE
* Wordpress
* Define boundaries btwn ops/dev
* Deploy only wp-content
* It's just php

!SLIDE
* Mule
* Hot deploy ++
* Testing --
* Groovy (testing possible!)
* Deploy possibility service/system dependent

!SLIDE
* Pragprog
* Only one editor
* Only one deploy system
* ci.sh

!SLIDE 
* cost of deploy
* $50 per deploy
  * $100 from tv4 employee(technical)
  * $100 from tv4 employee(nontechnical)
* if everything goes ok otherwise start over....

!SLIDE
* mail
* user filters.
    * 0 inbox kinda hard w/ 50 mail a day
* only broken or fixed(mail)

!SLIDE
* Not all systems can auto deploy
* CMS(Polopoly)
* Wordpress
* Mule (i have to copy how many petabytes)
* Ruby (Heroku, warbler, capistrano)
* Avoided db migrations so far.


